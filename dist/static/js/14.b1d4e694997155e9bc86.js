webpackJsonp([14],{"2Wpj":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={name:"user",components:{Action_tit:e("mMS5").a},data:function(){return{accumulatedRecharge:"",cumulativeConsumption:"",integral:"",managerName:"",phone:"",pageNumber:"1",rows:"10",userId:window.localStorage.id,resData:{}}},userData:{},methods:{handleSizeChange:function(t){this.rows=t,this.getHistorcal()},handleCurrentChange:function(t){this.pageNumber=t,this.getHistorcal()},toDecimal2:function(t){var a=(Math.round(100*t)/100).toString(),e=a.indexOf(".");for(e<0&&(e=a.length,a+=".");a.length<=e+2;)a+="0";return a},exportIntegralExcel:function(){var t=this;this.axios({method:"get",url:this.host+"integral/export?userId="+this.userId}).then(function(a){t.urlDownload(a.data.data.FileUrl)}).catch(function(t){alert("导出失败！")})},getHistorcal:function(){var t=this;this.axios({method:"get",url:this.host+"integral/queryAll?userId="+this.userId+"&pageNumber="+this.pageNumber+"&rows="+this.rows}).then(function(a){t.resData=a.data})}},created:function(){var t=this;this.getHistorcal(),this.axios({method:"get",url:this.host+"user/tokenGetUser?userId="+window.localStorage.id}).then(function(a){200==a.data.status&&(t.accumulatedRecharge=a.data.data.accumulatedRecharge,t.cumulativeConsumption=a.data.data.cumulativeConsumption,t.integral=a.data.data.integral,t.managerName=a.data.data.managerName,t.phone=a.data.data.phone)})}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"action_child"},[e("action_tit",{attrs:{title:"积分流水"}}),t._v(" "),e("el-row",{attrs:{type:"flex",justify:"end",gutter:20}},[e("el-col",{attrs:{span:2}},[e("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.exportIntegralExcel}},[t._v("导出")])],1)],1),t._v(" "),e("el-row",{staticClass:"tit-row"},[e("el-col",{attrs:{span:3}},[e("div",[t._v("日期")])]),t._v(" "),e("el-col",{attrs:{span:3}},[e("div",{staticClass:"center"},[t._v("类型")])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"center"},[t._v("操作账号")])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"center"},[t._v("备注")])]),t._v(" "),e("el-col",{staticClass:"center",attrs:{span:3}},[e("div",[t._v("线索数量")])]),t._v(" "),e("el-col",{staticClass:"right",attrs:{span:3}},[e("div",[t._v("积分")])])],1),t._v(" "),t._l(t.resData.data,function(a,s){return e("el-row",{staticClass:"act-row"},[e("el-col",{attrs:{span:3}},[e("div",[t._v(t._s(t.timestampToTime(a.createTime)))])]),t._v(" "),e("el-col",{attrs:{span:3}},[e("div",{staticClass:"center"},[t._v(t._s(0==a.type?"筛选":1==a.type?"智能":2==a.type?"充值":3==a.type?"导出":"未知"))])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"center"},[t._v(t._s(a.operatorUser))])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"center"},[t._v(t._s(a.remark))])]),t._v(" "),e("el-col",{staticClass:"center",attrs:{span:3}},[e("div",[t._v(t._s(a.number?a.number:"/"))])]),t._v(" "),e("el-col",{staticClass:"right",attrs:{span:3}},[e("div",[t._v(t._s(-1!=t.toDecimal2(a.integral).indexOf("-")?t.toDecimal2(a.integral):"+"+t.toDecimal2(a.integral)))])])],1)}),t._v(" "),e("div",[e("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.resData.countSum>10,expression:"resData.countSum>10"}],staticStyle:{"text-align":"right","margin-top":"20px"},attrs:{background:!0,"page-sizes":[10,20,50,100],"page-size":10,"pager-count":7,layout:"total, sizes, prev, pager, next, jumper",total:t.resData.countSum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),e("el-row",{staticStyle:{"margin-top":"40px"}},[e("el-col",{attrs:{span:8}},[t._v("充值请联系客服经理 "+t._s(t.managerName)+"："+t._s(t.phone))]),t._v(" "),e("el-col",{staticClass:"right",attrs:{span:16}},[e("span",[t._v("累计充值  ")]),t._v(" "),e("span",[t._v(t._s(t.accumulatedRecharge)+"    ")]),t._v(" "),e("span",[t._v("累计消耗  ")]),t._v(" "),e("span",[t._v(t._s(t.cumulativeConsumption)+"    ")]),t._v(" "),e("span",[t._v("当前剩余  ")]),t._v(" "),e("span",[t._v(t._s(t.integral)+"    ")])])],1)],2)},staticRenderFns:[]};var r=e("VU/8")(s,n,!1,function(t){e("YKOn")},"data-v-504e2fed",null);a.default=r.exports},YKOn:function(t,a){}});