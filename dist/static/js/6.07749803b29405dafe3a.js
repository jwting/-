webpackJsonp([6],{CB3H:function(t,e){},HrUc:function(t,e){},tKtY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mMS5"),n=a("BO1k"),s=a.n(n),o={name:"permissionTree",props:["treeData"],data:function(){return{checked:!1,isChecked:[],data:this.treeData}},watch:{data:{handler:function(t,e){this.$emit("change",t)},deep:!0},treeData:{handler:function(){this.data=this.treeData}}},methods:{openChecked:function(t){if(-1==this.isChecked.indexOf(t))this.isChecked.push(t);else{var e=this.isChecked.indexOf(t);this.isChecked.splice(e,1)}},parseChange:function(t,e,a){var i=!0,n=!1,o=void 0;try{for(var r,l=s()(e);!(i=(r=l.next()).done);i=!0){r.value.status=t}}catch(t){n=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(n)throw o}}this.data[a].isIndeterminate=!1},childChange:function(t,e){var a=t.length,i=0,n=!0,o=!1,r=void 0;try{for(var l,c=s()(t);!(n=(l=c.next()).done);n=!0){l.value.status&&i++}}catch(t){o=!0,r=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw r}}i==a?(this.data[e].status=!0,this.data[e].isIndeterminate=!1):0==i?this.data[e].status=!1:0!=i&&(this.data[e].status=!1,this.data[e].isIndeterminate=!0)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.data,function(e,i){return a("div",{staticClass:"click"},[a("div",[a("span",{class:-1==t.isChecked.indexOf(e.id)?"el-icon-arrow-right":"el-icon-arrow-down",on:{click:function(a){t.openChecked(e.id)}}}),t._v(" "),a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:function(a){t.parseChange(e.status,e.children,i)}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"v.status"}}),t._v(" "),a("span",{on:{click:function(a){t.openChecked(e.id)}}},[t._v(" "+t._s(e.permissionName))])],1),t._v(" "),a("div",t._l(e.children,function(n){return-1!=t.isChecked.indexOf(e.id)?a("div",[a("span",[t._v("         ")]),t._v(" "),a("el-checkbox",{on:{change:function(a){t.childChange(e.children,i)}},model:{value:n.status,callback:function(e){t.$set(n,"status",e)},expression:"item.status"}}),t._v(" "),a("span",[t._v(" "+t._s(n.permissionName))])],1):t._e()}))])}))},staticRenderFns:[]};var l={name:"authority",data:function(){return{defaultExpanded:[],defaultChecked:[],defaultProps:{children:"children",label:"permissionName"},isId:"",roleId:"",isAuthorityManagement:!1,roleList:{},authorityManagement:[]}},methods:{handleClick:function(t){var e=this;e.roleId=t,e.axios({method:"post",url:e.host+"permission/getRolePermission",data:{id:t}}).then(function(t){e.authorityManagement=t.data.data,e.isAuthorityManagement=!0}),this.isId=t},updataSionsList:function(){var t=this;t.axios({method:"post",url:t.host+"permission/updateRolePermission",data:{roleId:t.roleId,lists:t.authorityManagement}}).then(function(e){200==e.data.status?(t.isAuthorityManagement=!1,t.$message({message:e.data.msg,type:"success"})):t.$message.error(e.data.msg)})}},components:{PermissionTree:a("VU/8")(o,r,!1,function(t){a("HrUc")},"data-v-41b5297e",null).exports,Action_tit:i.a},created:function(){var t=this;t.axios({method:"post",data:{cId:window.localStorage.cId},url:t.host+"permission/getCompanyRoles"}).then(function(e){t.roleList=e.data,console.log(e.data)})}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action_child",staticStyle:{"min-height":"500px","border-radius":"8px"}},[a("action_tit",{attrs:{title:"权限管理"}}),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-button",{attrs:{disabled:!0,type:"success",icon:"el-icon-setting"}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{disabled:!0,type:"primary",icon:"el-icon-plus"}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{disabled:!0,type:"danger",icon:"el-icon-delete"}},[t._v("删除")]),t._v(" "),a("span",{staticClass:"ti"},[t._v("该功能暂不可用")])],1),t._v(" "),a("el-dialog",{staticStyle:{"text-align":"left","font-size":"12px","border-radius":"6px"},attrs:{visible:t.isAuthorityManagement,width:"400px",center:!0,top:"15vh"},on:{"update:visible":function(e){t.isAuthorityManagement=e}}},[a("div",{staticStyle:{height:"300px",overflow:"auto"}},[a("permission-tree",{attrs:{"tree-data":t.authorityManagement}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isAuthorityManagement=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updataSionsList}},[t._v("确 定")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%",margin:"0 auto"},attrs:{data:t.roleList.data,border:""}},[a("el-table-column",{attrs:{prop:"roleName",label:"角色名",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"角色说明",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roleName",align:"center",label:"设置"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row.id)}}},[a("span",{staticClass:"el-icon-setting"})])]}}])})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(t){a("CB3H")},"data-v-5cb2c945",null);e.default=d.exports}});