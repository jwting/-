webpackJsonp([15],{QPbw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mMS5"),l=a("1SSd"),o=a("JT3l"),i={name:"myClue",components:{PageComponent:a("EU7o").a,DisplayBars:o.a,ScreeningComponents:l.a,Action_tit:s.a},data:function(){return{moveloding:!1,pageData:[{pageNumber:1,row:20,countSum:0,radio:"queryCues",queryVo:{userId:this.userId()}},{pageNumber:1,row:20,countSum:0,radio:"querySubmersible",custQueryVo:{userId:this.userId()}}],isSelect:"",ClueData:[],nickId:"",departId:"",departData:[],submersibleData:{userId:this.userId(),companyId:"",custType:"A",record:""},enterTheSubmersible:!1,bars:{min:1,max:2},isLookatThewHole:!1,radio:"queryCues",Grade:[{value:"A",label:"A:成单"},{value:"B",label:"B:有兴趣"},{value:"C",label:"C:暂无需求"},{value:"D",label:"D:不感兴趣/挂电话"},{value:"E",label:"E:接不通"}],data:{submersible:[{value:"address",label:"地址"},{value:"operation",label:"行业"},{value:"companyName",label:"公司名"}],clue:[{value:"custType",label:"意向类型"},{value:"companyName",label:"公司名"}]},mySubmersibleData:{countSum:0},myClueData:{},selectRep:{userId:this.userId(),ids:"",deptId:"",destId:""},list:[],allocateAll:{queryVo:{userId:this.userId()}},allocateAllClue:{custQueryVo:{userId:this.userId()}}}},watch:{selectRep:{handler:function(e,t){this.nubEmployee(!1)},deep:!0},myClueData:{handler:function(e,t){this.pageData[0].countSum=e.countSum},deep:!0},mySubmersibleData:{handler:function(e,t){this.pageData[1].countSum=e.countSum},deep:!0}},computed:{myUserId:function(){return window.localStorage.id}},methods:{handleMobileClueis:function(e){this.getDepartmentList(),this.isSelect=e},userId:function(){var e=this.$route.query.value;if(e)t=e;else var t=window.localStorage.id;return t},joinRemarks:function(){var e=this.host+"custIntention/saveCustIntention",t=this.submersibleData;this.msgDialog(e,t),this.enterTheSubmersible=!1},nubEmployee:function(){var e=this;e.axios({url:this.host+"user/searchDeptEmployee",method:"post",data:{id:this.selectRep.deptId}}).then(function(t){e.ClueData=t.data.data})},getDepartmentList:function(){var e=this;this.axios({method:"POST",data:{id:window.localStorage.cId},url:this.host+"dept/searchDeptDeatil"}).then(function(t){e.departData=t.data.data,e.isLookatThewHole=!0})},handleSelectionChange:function(e){this.selectRep.ids=this.getUpdataId(e,"ids",this.selectRep.ids)},goDetails:function(e){this.$router.push({name:"company",params:{value:e}})},handleSelect:function(e){this.radio=e,this.isRadioGetData()},sumDelete:function(e){var t=this;this.$confirm("删除该记录将进入回收站, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={companyId:e,userId:window.localStorage.id},s=t.host+"custIntention/deleteCustomersByCompanyIds";t.msgDialog(s,a)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},ThewHole:function(){if("queryCues"!=this.radio||this.isSelect){if("queryCues"==this.radio&&this.isSelect){this.allocateAll.queryVo.startRow=this.bars.min,this.allocateAll.queryVo.endRow=this.bars.max-this.bars.min+1,this.allocateAll.destId=this.selectRep.destId;e=this.allocateAll,t=this.host+"move/movePersonPoolByCondition"}}else var e=this.selectRep,t=this.host+"move/moveDeptPoolToDeptPool";this.moveloding=!0,this.msgDialog(t,e)},msgDialog:function(e,t){var a=this;this.axios({method:"POST",data:t,url:e}).then(function(e){a.moveloding=!1,a.isLookatThewHole=!1,200==e.data.status?(a.isRadioGetData(!1),a.$message({message:e.data.msg,type:"success"})):this.$message.error(e.data.msg)})},pushData:function(e){"queryCues"==this.radio?(this.allocateAll.queryVo=e,this.pageData[0].pageNumber=1,this.pageData[0].queryVo=e,this.isRadioGetData()):(this.allocateAllClue.custQueryVo=e,this.pageData[1].pageNumber=1,this.pageData[1].custQueryVo=e,this.isRadioGetData())},handleSizeChange:function(){this.isRadioGetData()},handleCurrentChange:function(){this.isRadioGetData()},isRadioGetData:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("queryCues"==this.radio){var t=this.host+"companyInfo/getPersonPoolByCondition";this.getData(t,this.pageData[0],"myClueData",e)}else{t=this.host+"custIntention/getCustomersByUserId";this.getData(t,this.pageData[1],"mySubmersibleData",e)}}},created:function(){var e=this.$route.query.radio;e&&(this.radio=e),this.isRadioGetData()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"action_child work-app-style"},[a("action_tit",{attrs:{title:"queryCues"==e.radio?"我的线索":"我的潜客"}}),e._v(" "),a("div",{staticClass:"search-margin"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.radio,mode:"horizontal"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"queryCues"}},[e._v("我的线索")]),e._v(" "),a("el-menu-item",{attrs:{index:"querySubmersible"}},[e._v("我的潜客")])],1)],1),e._v(" "),a("screening-components",{attrs:{"user-id":e.userId(),target:e.radio,data:e.data},on:{upload:e.pushData}})],1),e._v(" "),a("div",{staticClass:"action_child"},[a("div",{staticClass:"text-margin"},[e.myUserId==e.userId()?["queryCues"==e.radio?a("el-button",{attrs:{type:"primary",disabled:""==this.selectRep.ids},on:{click:function(t){e.handleMobileClueis(!1)}}},[e._v("移动选中")]):e._e(),e._v(" "),"queryCues"==e.radio?a("el-button",{attrs:{type:"primary",disabled:0==e.myClueData.countSum},on:{click:function(t){e.handleMobileClueis(!0)}}},[e._v("移动全部")]):e._e()]:e._e(),e._v(" "),a("display-bars",{attrs:{msg:"queryCues"==e.radio?"条线索":"条潜客","count-sum":"queryCues"==e.radio?e.myClueData.countSum:e.mySubmersibleData.countSum}})],2),e._v(" "),a("el-dialog",{attrs:{visible:e.enterTheSubmersible,center:!0,width:"500px"},on:{"update:visible":function(t){e.enterTheSubmersible=t}}},[a("div",[a("el-row",{staticClass:"text-margin"},[a("el-col",{attrs:{span:7}},[a("span",[e._v("客户意向等级:")])]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:e.submersibleData.custType,callback:function(t){e.$set(e.submersibleData,"custType",t)},expression:"submersibleData.custType"}},e._l(e.Grade,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("span",[e._v("跟进记录:")])]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.submersibleData.record,callback:function(t){e.$set(e.submersibleData,"record",t)},expression:"submersibleData.record"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.enterTheSubmersible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.joinRemarks}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{visible:e.isLookatThewHole,center:!0,width:"400px"},on:{"update:visible":function(t){e.isLookatThewHole=t}}},[a("div",[e.isSelect?a("div",[a("div",{staticClass:"text-margin"},[a("span",[e._v("开始条数：  ")]),e._v(" "),a("el-input-number",{staticStyle:{"margin-right":"30px"},attrs:{min:1,max:"queryCues"==e.radio?e.myClueData.countSum:e.mySubmersibleData.countSum,label:"开始条数"},model:{value:e.bars.min,callback:function(t){e.$set(e.bars,"min",t)},expression:"bars.min"}})],1),e._v(" "),a("div",{staticClass:"text-margin"},[a("span",[e._v("结束条数：  ")]),e._v(" "),a("el-input-number",{attrs:{min:1,max:"queryCues"==e.radio?e.myClueData.countSum:e.mySubmersibleData.countSum,label:"结束条数"},model:{value:e.bars.max,callback:function(t){e.$set(e.bars,"max",t)},expression:"bars.max"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:function(t){e.bars.max="queryCues"==e.radio?e.myClueData.countSum:e.mySubmersibleData.countSum}}},[e._v("最大")])],1)]):e._e(),e._v(" "),a("div",[a("span",[e._v("跟进人：     ")]),e._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"选择部门"},model:{value:e.selectRep.deptId,callback:function(t){e.$set(e.selectRep,"deptId",t)},expression:"selectRep.deptId"}},e._l(e.departData,function(e){return a("el-option",{key:e.id,attrs:{label:e.deptName,value:e.id}})})),e._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"选择员工"},model:{value:e.selectRep.destId,callback:function(t){e.$set(e.selectRep,"destId",t)},expression:"selectRep.destId"}},e._l(e.ClueData,function(e){return a("el-option",{key:e.id,attrs:{label:e.nickName,value:e.id}})}))],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isLookatThewHole=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.ThewHole}},[e._v("确 定")])],1)]),e._v(" "),"queryCues"==e.radio?a("el-table",{key:"4511616",attrs:{data:e.myClueData.data},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"公司名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[e._v("公司名")]),e._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(t.row.companyName))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"color"},[e._v(e._s(t.row.companyName))])])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"官网",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("a",{staticClass:"color",attrs:{href:-1!=t.row.webSite.toString().indexOf("http")?t.row.webSite:"http://"+t.row.webSite,target:"_blank"}},[e._v("\n              "+e._s(t.row.webSite?t.row.webSite:"/")+"\n            ")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[e._v("地址")]),e._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(t.row.address))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(t.row.address))])])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"主营产品",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[e._v("主营产品")]),e._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(t.row.operation))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(t.row.operation))])])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系方式",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[e._v("联系方式")]),e._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(t.row.contactPhone))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(t.row.contactPhone))])])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"注册时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("span",[e._v(e._s(t.row.createTime))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.goDetails(t.row.id)}}},[e._v("详情")]),e._v(" "),e.myUserId==e.userId()?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.enterTheSubmersible=!0,e.submersibleData.companyId=t.row.id}}},[e._v("新增备注")]):e._e()]}}])})],1):a("el-table",{key:"4511617",attrs:{data:e.mySubmersibleData.data},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"公司名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[e._v("公司名")]),e._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(t.row.companyName))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"color"},[e._v(e._s(t.row.companyName))])])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"意向类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("span",[e._v(e._s(t.row.custType))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"跟进记录",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[e._v("跟进记录")]),e._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(t.row.record))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(t.row.record))])])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上次跟进时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("span",[e._v(e._s(t.row.lastDate))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"触达时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("span",[e._v(e._s(t.row.firstDate))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.goDetails(t.row.companyId)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.enterTheSubmersible=!0,e.submersibleData.companyId=t.row.companyId}}},[e._v("新增备注")]),e._v(" "),a("el-button",{staticClass:"danger",attrs:{type:"text"},on:{click:function(a){e.sumDelete(t.row.companyId)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("page-component",{attrs:{radio:e.radio,data:e.pageData},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var r=a("VU/8")(i,n,!1,function(e){a("nyRW")},"data-v-438e85ac",null);t.default=r.exports},nyRW:function(e,t){}});