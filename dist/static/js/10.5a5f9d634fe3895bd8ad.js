webpackJsonp([10],{"Z7L/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mMS5"),l=a("1SSd"),i=a("EU7o"),o={name:"companyClue",components:{DisplayBars:a("JT3l").a,PageComponent:i.a,ScreeningComponents:l.a,Action_tit:s.a},data:function(){return{moveloding:!1,pageData:[{pageNumber:1,row:20,countSum:0,radio:"queryCues",queryVo:{userId:window.localStorage.id}},{pageNumber:1,row:20,countSum:0,radio:"querySubmersible",custQueryVo:{userId:window.localStorage.id}}],isSelectSearch:!1,departId:"",nickId:"",isSelect:"",departData:[],activeName2:!1,isLookatThewHole:!1,radio:"queryCues",bars:{min:1,max:1},data:{submersible:[{value:"address",label:"地址"},{value:"operation",label:"行业"},{value:"companyName",label:"公司名"}],clue:[{value:"custType",label:"意向类型"},{value:"companyName",label:"公司名"}]},conditionsList:[{}],clueSubmersi:{countSum:0},clueData:{data:[]},list:[],selectRep:{userId:window.localStorage.id,ids:"",deptId:""},allocateAll:{queryVo:{userId:window.localStorage.id}},allocateAllClue:{custQueryVo:{userId:window.localStorage.id}}}},watch:{isSelectSearch:function(){this.pageData[0].pageNumber=1,this.isRadioGetData()},clueData:{handler:function(t,e){this.pageData[0].countSum=t.countSum},deep:!0},clueSubmersi:{handler:function(t,e){this.pageData[1].countSum=t.countSum},deep:!0}},computed:{userId:function(){return window.localStorage.id}},methods:{getDepartmentList:function(t){var e=this;e.isSelect=t,this.axios({method:"POST",data:{id:window.localStorage.cId},url:this.host+"dept/searchDeptDeatil"}).then(function(t){e.departData=t.data.data,e.isLookatThewHole=!0})},handleSelectionChange:function(t){this.list=t,this.selectRep.ids=this.getUpdataId(t,"ids")},handleSelect:function(t){this.radio=t,this.list=[],this.isRadioGetData()},handleClick:function(){},msgDialog:function(t,e){var a=this;this.axios({method:"POST",data:e,url:t}).then(function(t){a.moveloding=!1,a.isLookatThewHole=!1,a.isRadioGetData(!1),a.$message({message:t.data.msg,type:"success"})}).catch(function(){a.moveloding=!1})},ThewHole:function(){if(this.moveloding=!0,!this.isSelect&&this.departId&&"queryCues"==this.radio){this.selectRep.deptId=this.departId;var t=this.selectRep,e=this.host+"move/moveCompanyPoolToDeptPool"}else if(this.departId&&"queryCues"==this.radio){this.allocateAll.queryVo.startRow=this.bars.min,this.allocateAll.queryVo.endRow=this.bars.max-this.bars.min+1,this.allocateAll.queryVo.deptId=this.departId;t=this.allocateAll,e=this.host+"move/moveAllCompanyInfoByCondition"}else if(!this.isSelect&&this.departId){this.selectRep.deptId=this.departId;t=this.selectRep,e=this.host+"custIntention/moveCustToDeptByIds"}else if(this.isSelect&&this.departId){this.allocateAllClue.custQueryVo.startRow=this.bars.min,this.allocateAllClue.custQueryVo.endRow=this.bars.max-this.bars.min+1,this.allocateAllClue.custQueryVo.deptId=this.departId;t=this.allocateAllClue,e=this.host+"custIntention/moveAllCustToDeptByCondition"}this.msgDialog(e,t)},pushData:function(t){"queryCues"==this.radio?(this.allocateAll.queryVo=t,this.pageData[0].pageNumber=1,this.pageData[0].queryVo=t):(this.allocateAllClue.custQueryVo=t,this.pageData[1].pageNumber=1,this.pageData[1].custQueryVo=t),this.isRadioGetData()},handleSizeChange:function(){this.isRadioGetData()},handleCurrentChange:function(){this.isRadioGetData()},toSearch:function(){},isRadioGetData:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("queryCues"==this.radio){var e=this.isSelectSearch?this.host+"companyInfo/getCompanyPoolJoinedByCondition":this.host+"companyInfo/getCompanyPoolByCondition";this.getData(e,this.pageData[0],"clueData",t)}else{e=this.host+"custIntention/getCustomersByCompanyId";this.getData(e,this.pageData[1],"clueSubmersi",t)}}},created:function(){this.isRadioGetData()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"action_child work-app-style"},[a("action_tit",{attrs:{title:"queryCues"==t.radio?"公司线索":"公司潜客"}}),t._v(" "),a("div",{staticClass:"search-margin"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.radio,mode:"horizontal"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"queryCues"}},[t._v("公司线索")]),t._v(" "),a("el-menu-item",{attrs:{index:"querySubmersible"}},[t._v("公司潜客")])],1)],1),t._v(" "),a("screening-components",{attrs:{data:t.data,"user-id":t.userId,target:t.radio},on:{upload:t.pushData}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.isLookatThewHole,center:!0,width:"400px"},on:{"update:visible":function(e){t.isLookatThewHole=e}}},[a("div",[t.isSelect?a("div",[a("div",{staticClass:"text-margin"},[a("span",[t._v("开始条数：  ")]),t._v(" "),a("el-input-number",{staticStyle:{"margin-right":"30px"},attrs:{min:1,max:"queryCues"==t.radio?t.clueData.countSum:t.clueSubmersi.countSum,label:"开始条数"},model:{value:t.bars.min,callback:function(e){t.$set(t.bars,"min",e)},expression:"bars.min"}})],1),t._v(" "),a("div",{staticClass:"text-margin"},[a("span",[t._v("结束条数：  ")]),t._v(" "),a("el-input-number",{attrs:{min:1,max:"queryCues"==t.radio?t.clueData.countSum:t.clueSubmersi.countSum,label:"结束条数"},model:{value:t.bars.max,callback:function(e){t.$set(t.bars,"max",e)},expression:"bars.max"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:function(e){t.bars.max="queryCues"==t.radio?t.clueData.countSum:t.clueSubmersi.countSum}}},[t._v("最大")])],1)]):t._e(),t._v(" "),a("div",[a("span",[t._v("跟进人：     ")]),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"选择部门"},model:{value:t.departId,callback:function(e){t.departId=e},expression:"departId"}},t._l(t.departData,function(t){return a("el-option",{key:t.id,attrs:{label:t.deptName,value:t.id}})}))],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isLookatThewHole=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.moveloding},on:{click:t.ThewHole}},[t._v("确 定")])],1)]),t._v(" "),a("div",{staticClass:"action_child"},[a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"text-margin float-left"},[a("el-button",{attrs:{type:"primary",disabled:0==this.list.length},on:{click:function(e){t.getDepartmentList(!1)}}},[t._v("分配选中")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getDepartmentList(!0)}}},[t._v("分配全部")]),t._v(" "),a("display-bars",{attrs:{msg:"queryCues"==t.radio?"条线索":"条潜客","count-sum":"queryCues"==t.radio?t.clueData.countSum:t.clueSubmersi.countSum}})],1),t._v(" "),"queryCues"==t.radio?a("div",{staticClass:"float-right"},[a("el-checkbox",{staticClass:"unallocated-cues",attrs:{border:""},model:{value:t.isSelectSearch,callback:function(e){t.isSelectSearch=e},expression:"isSelectSearch"}},[t._v("只查看未被分配的线索")])],1):t._e()]),t._v(" "),"queryCues"==t.radio?a("el-table",{attrs:{data:t.clueData.data},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"companyName",label:"公司名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[t._v("公司名")]),t._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[t._v(t._s(e.row.companyName))]),t._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"color"},[t._v(t._s(e.row.companyName))])])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"官网"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("a",{staticClass:"color",attrs:{href:-1!=e.row.webSite.toString().indexOf("http")?e.row.webSite:"http://"+e.row.webSite,target:"_blank"}},[t._v(t._s(e.row.webSite?e.row.webSite:"/"))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"注册时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("span",[t._v(t._s(e.row.createTime))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[t._v("地址")]),t._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[t._v(t._s(e.row.address))]),t._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[t._v(t._s(e.row.address))])])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"行业"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[t._v("行业")]),t._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[t._v(t._s(e.row.operation))]),t._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[t._v(t._s(e.row.operation))])])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"是否被分配"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("span",{class:e.row.isJoin?"danger":"blue"},[t._v(t._s(e.row.isJoin?"是":"否"))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"部门"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("span",[t._v(t._s(e.row.deptName?e.row.deptName:"/"))])])]}}])})],1):a("el-table",{attrs:{data:t.clueSubmersi.data},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"companyName",label:"公司名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[t._v("公司名")]),t._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[t._v(t._s(e.row.companyName))]),t._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"color"},[t._v(t._s(e.row.companyName))])])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"意向类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("span",{},[t._v(t._s(e.row.custType))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"跟进备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[t._v("跟进备注")]),t._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[t._v(t._s(e.row.record))]),t._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[t._v(t._s(e.row.record))])])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"触达时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("span",[t._v(t._s(e.row.firstDate))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"上次跟进时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("span",[t._v(t._s(e.row.lastDate))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"跟进人"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"el-table-height"},[a("span",[t._v(t._s(e.row.userName))])])]}}])})],1),t._v(" "),a("page-component",{attrs:{radio:t.radio,data:t.pageData},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,n,!1,function(t){a("jzVv")},null,null);e.default=r.exports},jzVv:function(t,e){}});