webpackJsonp([7],{f2hV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),i=a.n(s),n={name:"Historical-records",components:{Action_tit:a("mMS5").a},data:function(){return{repData:{rows:"10",pageNumber:"1",userId:""},userId:"",resData:{}}},methods:{ImportStrategy:function(t){var e={condition:this.resData.data[t].condition,strategyName:this.resData.data[t].strategyName,logicValue:this.resData.data[t].logicValue};this.$router.push({name:"screening",params:{value:e}})},handleSizeChange:function(t){this.repData.rows=t,this.getHistorcal()},handleCurrentChange:function(t){this.repData.pageNumber=t,this.getHistorcal()},delectStrategy:function(t,e){var a=this,s=this;this.$confirm("此操作将永久删除该策略, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.axios({method:"get",url:a.host+"historyStrategy/deleteHistoryStrategy?strategyName="+t+"&userId="+a.userId}).then(function(t){s.$message({type:"success",message:"删除成功!"}),s.resData.data.splice(e,1)})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},getHistorcal:function(){var t=this,e=t.repData,a="historyStrategy/queryHistoryStrategy?pageNumber="+e.pageNumber+"&rows="+e.rows+"&userId="+e.userId;t.axios({method:"get",url:t.host+a}).then(function(e){var a=!0,s=!1,n=void 0;try{for(var r,o=i()(e.data.data);!(a=(r=o.next()).done);a=!0){var c=r.value,l=!0,d=!1,v=void 0;try{for(var p,u=i()(c.condition);!(l=(p=u.next()).done);l=!0){var _=p.value;4==_.type&&(_.conditions=_.conditions.toString().replace(/[\[\]]/g,"").split(","))}}catch(t){d=!0,v=t}finally{try{!l&&u.return&&u.return()}finally{if(d)throw v}}}}catch(t){s=!0,n=t}finally{try{!a&&o.return&&o.return()}finally{if(s)throw n}}t.resData=e.data})}},created:function(){this.userId=window.localStorage.id,this.repData.userId=window.localStorage.id,this.getHistorcal()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action_child"},[a("action_tit",{attrs:{title:"筛选历史"}}),t._v(" "),a("el-row",{staticClass:"tit-row"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("日期")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"left"},[t._v("条件")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"center"},[t._v("策略备注")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"center"},[t._v("结果数")])]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:5}},[a("div",[t._v("操作")])])],1),t._v(" "),t._l(t.resData.data,function(e,s){return a("el-row",{key:s,staticClass:"act-row ls"},[a("el-col",{attrs:{span:3}},[a("div",[t._v(t._s(e.date))])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[a("div",{staticStyle:{"line-height":"26px"}},[a("div",{staticStyle:{"font-weight":"600","font-size":"15px",color:"#000"}},[t._v(t._s(1==e.logicValue?"符合以下全部":"符合其中一个"))]),t._v(" "),t._l(e.condition,function(e,s){return a("div",{key:s},[a("span",{staticStyle:{"font-weight":"600"}},[t._v(t._s(e.field+":")+" ")]),t._v(" "),3!=e.type&&4!=e.type?a("span",[t._v(t._s(1==e.fieldLogic?"符合全部":2==e.fieldLogic?"符合其中一个":3==e.fieldLogic?"符合全部才排除":"符合一个就排除")+" ")]):t._e(),t._v(" "),3==e.type?a("span",[t._v(t._s(1==e.fieldLogic?"是":"否"))]):t._e(),t._v(" "),2==e.type?a("span",t._l(e.conditions.split(","),function(s,i){return a("span",{key:i},[a("span",[t._v(t._s(-1==s.indexOf("and")?s+e.unit:"介于"+s.split("and")[0]+e.unit+"-"+s.split("and")[1]+e.unit)+" ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:i!=e.conditions.split(",").length-1,expression:"k!=item.conditions.split(',').length-1"}]},[t._v(t._s(1==e.fieldLogic?"且":"或")+" ")])])})):t._e(),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.type,expression:"item.type==1"}]},[t._v(t._s(e.conditions))]),t._v(" "),4==e.type?a("span",[t._v(t._s(e.conditions.toString().replace(/[\[\]]/g,"")))]):t._e()])})],2),t._v(" "),a("div",{staticClass:"left pointer",attrs:{slot:"reference"},slot:"reference"},[a("div",[t._v(t._s(1==e.logicValue?"符合以下全部":"符合其中一个"))]),t._v(" "),t._l(e.condition,function(e,s){return a("div",{key:s},[a("span",[t._v(t._s(e.field+":")+" ")]),t._v(" "),3!=e.type&&4!=e.type?a("span",[t._v(t._s(1==e.fieldLogic?"符合全部":2==e.fieldLogic?"符合其中一个":3==e.fieldLogic?"符合全部才排除":"符合一个就排除")+" ")]):t._e(),t._v(" "),3==e.type?a("span",[t._v(t._s(1==e.fieldLogic?"是":"否"))]):t._e(),t._v(" "),2==e.type?a("span",t._l(e.conditions.split(","),function(s,i){return a("span",{key:i},[a("span",[t._v(t._s(-1==s.indexOf("and")?s+e.unit:"介于"+s.split("and")[0]+e.unit+"-"+s.split("and")[1]+e.unit)+" ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:i!=e.conditions.split(",").length-1,expression:"k!=item.conditions.split(',').length-1"}]},[t._v(t._s(1==e.fieldLogic?"且":"或")+" ")])])})):t._e(),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.type,expression:"item.type==1"}]},[t._v(t._s(e.conditions))]),t._v(" "),4==e.type?a("span",[t._v(t._s(e.conditions.toString().replace(/[\[\]]/g,"")))]):t._e()])})],2)])],1),t._v(" "),a("el-col",{staticClass:"center",attrs:{span:6}},[a("div",[t._v(t._s(e.strategyName))])]),t._v(" "),a("el-col",{staticClass:"center",attrs:{span:4}},[a("div",[t._v(t._s(e.number))])]),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:5}},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.ImportStrategy(s)}}},[t._v("导入")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.delectStrategy(e.strategyName,s)}}},[t._v("删除")])],1)])],1)}),t._v(" "),a("div",[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.resData.countSum>10,expression:"resData.countSum>10"}],staticStyle:{"text-align":"right","margin-top":"20px"},attrs:{background:!0,"page-sizes":[10,20,50,100],"page-size":10,"pager-count":7,layout:"total, sizes, prev, pager, next, jumper",total:t.resData.countSum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2)},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(t){a("hjwt")},"data-v-ae65bb0c",null);e.default=o.exports},hjwt:function(t,e){}});