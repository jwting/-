webpackJsonp([5],{"8HNP":function(e,t){},BZf1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),l=a("1SSd"),o=a("mMS5"),r=a("EU7o"),n={name:"departmentalClues",components:{DisplayBars:a("JT3l").a,PageComponent:r.a,Action_tit:o.a,ScreeningComponents:l.a},data:function(){return{arr:[15158592e5,15199999e5],isSelectSearch:!1,moveloding:!1,isAdmin:window.localStorage.isadmin,pageData:[{pageNumber:1,row:20,countSum:0,radio:"queryCues",queryVo:{deptId:this.depId(),userId:window.localStorage.id}},{pageNumber:1,row:20,countSum:0,radio:"querySubmersible",custQueryVo:{deptId:this.depId(),userId:window.localStorage.id}}],dId:"",departId:"",nickId:"",isyi:"",ClueData:[],isSelect:"",bars:{max:"",min:""},isLookatThewHole:!1,details:!1,radio:"queryCues",data:{submersible:[{value:"address",label:"地址"},{value:"operation",label:"行业"},{value:"companyName",label:"公司名"}],clue:[{value:"custType",label:"意向类型"},{value:"companyName",label:"公司名"}]},departData:[],departmentalSubmersi:{},departmentalData:{},selectRep:{ids:"",destUserId:"",deptId:"",userId:window.localStorage.id},allocateAll:{destUserId:"",queryVo:{deptId:this.depId(),userId:window.localStorage.id}},allocateAllClue:{destUserId:"",custQueryVo:{deptId:this.depId(),userId:window.localStorage.id}}}},watch:{arr:{handler:function(e,t){console.log(e)},deep:!0},isSelectSearch:function(){this.pageData[0].pageNumber=1,this.isRadioGetData()},selectRep:{handler:function(e,t){this.isyi&&this.nubEmployee(!1)},deep:!0},departmentalData:{handler:function(e,t){this.pageData[0].countSum=e.countSum},deep:!0},departmentalSubmersi:{handler:function(e,t){this.pageData[1].countSum=e.countSum},deep:!0}},computed:{myDepId:function(){return window.localStorage.dId}},methods:{depId:function(){var e=this.$route.query.value;if(e)t=e;else var t=window.localStorage.dId;return t},joinService:function(e){var t={userId:window.localStorage.id,ids:e},a=this.host+"move/joinServer";this.msgDialog(a,t)},selectJoinService:function(){var e={userId:window.localStorage.id,ids:this.selectRep.ids},t=this.host+"move/joinServer";this.msgDialog(t,e)},selectPubilk:function(e,t){this.isSelect=t,this.isyi=e,this.bars.max="queryCues"==this.radio?this.departmentalData.countSum:this.departmentalSubmersi.countSum,e?this.nubEmployee():this.getDepartmentList()},getDepartmentList:function(){var e=this;this.axios({method:"POST",data:{id:window.localStorage.cId},url:this.host+"dept/searchDeptDeatil"}).then(function(t){e.departData=t.data.data,e.isLookatThewHole=!0})},handleSelectionChange:function(e){this.selectRep.ids=this.getUpdataId(e,"ids")},pushData:function(e){e=i()(e);"queryCues"==this.radio?(this.allocateAll.queryVo=JSON.parse(e),this.pageData[0].pageNumber=1,this.pageData[0].queryVo=JSON.parse(e),this.isRadioGetData(),console.log(this.pageData[0])):(this.allocateAllClue.custQueryVo=JSON.parse(e),this.pageData[1].pageNumber=1,this.pageData[1].custQueryVo=JSON.parse(e),this.isRadioGetData())},ThewHole:function(){if("queryCues"==this.radio&&this.isyi&&!this.isSelect)var e=this.host+"move/moveDeptPoolToUser",t=this.selectRep;else if("queryCues"==this.radio&&this.isyi&&this.isSelect){e=this.host+"move/moveDeptPoolToUserByCondition";this.allocateAll.queryVo.startRow=this.bars.min,this.allocateAll.queryVo.endRow=this.bars.max-this.bars.min+1,this.allocateAll.destUserId=this.selectRep.destUserId;t=this.allocateAll}else if("queryCues"!=this.radio||this.isyi||this.isSelect){if("queryCues"==this.radio&&!this.isyi&&this.isSelect){e=this.host+"move/moveDeptPoolByCondition";this.allocateAll.queryVo.startRow=this.bars.min,this.allocateAll.queryVo.endRow=this.bars.max-this.bars.min+1,this.allocateAll.destDeptId=this.selectRep.deptId;t=this.allocateAll}else if("queryCues"!=this.radio&&this.isyi&&!this.isSelect){e=this.host+"custIntention/movePersonCustByIds";(t=this.selectRep).destDeptId=window.localStorage.dId}else if("queryCues"!=this.radio&&this.isyi&&this.isSelect){e=this.host+"custIntention/movePersonCustByCondition";this.allocateAllClue.custQueryVo.startRow=this.bars.min,this.allocateAllClue.custQueryVo.endRow=this.bars.max-this.bars.min+1,this.allocateAllClue.destUserId=this.selectRep.destUserId,this.allocateAllClue.destDeptId=window.localStorage.dId;t=this.allocateAllClue}}else var e=this.host+"move/moveDeptPoolToDeptPool",t=this.selectRep;this.moveloding=!0,this.msgDialog(e,t)},msgDialog:function(e,t){var a=this;this.axios({method:"POST",data:t,url:e}).then(function(e){a.isLookatThewHole=!1,a.moveloding=!1,a.isRadioGetData(!1),a.$message({message:e.data.msg,type:"success"})})},goDetails:function(){this.$router.push({name:"company",params:{value:"0"}})},handleSelect:function(e){this.radio=e,this.isRadioGetData()},handleSizeChange:function(){this.isRadioGetData()},handleCurrentChange:function(){this.isRadioGetData()},isRadioGetData:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("queryCues"==this.radio){var t=this.isSelectSearch?this.host+"companyInfo/getDeptPoolNoServerByCondition":this.host+"companyInfo/getDeptPoolByCondition";this.getData(t,this.pageData[0],"departmentalData",e)}else{t=this.host+"custIntention/getCustomersByDeptId";this.getData(t,this.pageData[1],"departmentalSubmersi",e)}},nubEmployee:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;t.axios({url:this.host+"user/searchDeptEmployee",method:"post",data:{id:window.localStorage.dId}}).then(function(a){e&&(t.isLookatThewHole=!0),t.ClueData=a.data.data})}},mounted:function(){console.log(this.$refs)},created:function(){var e=this.$route.query.radio;e&&(this.radio=e),this.departId=this.myDepId,this.isRadioGetData()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"action_child work-app-style"},[a("action_tit",{attrs:{title:"queryCues"==e.radio?"部门线索":"部门潜客"}}),e._v(" "),a("div",{staticClass:"search-margin"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.radio,mode:"horizontal"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"queryCues"}},[e._v("部门线索")]),e._v(" "),a("el-menu-item",{attrs:{index:"querySubmersible"}},[e._v("部门潜客")])],1)],1),e._v(" "),a("screening-components",{attrs:{target:e.radio,"dept-id":e.depId(),data:e.data},on:{upload:e.pushData}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.isLookatThewHole,center:!0,width:"400px"},on:{"update:visible":function(t){e.isLookatThewHole=t}}},[a("div",[e.isSelect?a("div",[a("div",{staticClass:"text-margin"},[a("span",[e._v("开始条数：  ")]),e._v(" "),a("el-input-number",{staticStyle:{"margin-right":"30px"},attrs:{min:1,max:"queryCues"==e.radio?e.departmentalData.countSum:e.departmentalSubmersi.countSum,label:"开始条数"},model:{value:e.bars.min,callback:function(t){e.$set(e.bars,"min",t)},expression:"bars.min"}})],1),e._v(" "),a("div",{staticClass:"text-margin"},[a("span",[e._v("结束条数：  ")]),e._v(" "),a("el-input-number",{attrs:{min:1,max:"queryCues"==e.radio?e.departmentalData.countSum:e.departmentalSubmersi.countSum,label:"结束条数"},model:{value:e.bars.max,callback:function(t){e.$set(e.bars,"max",t)},expression:"bars.max"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:function(t){e.bars.max="queryCues"==e.radio?e.departmentalData.countSum:e.departmentalSubmersi.countSum}}},[e._v("最大")])],1)]):e._e(),e._v(" "),a("div",[a("span",[e._v("跟进人：     ")]),e._v(" "),e.isyi?e._e():a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"选择部门"},model:{value:e.selectRep.deptId,callback:function(t){e.$set(e.selectRep,"deptId",t)},expression:"selectRep.deptId"}},e._l(e.departData,function(e){return a("el-option",{key:e.id,attrs:{label:e.deptName,value:e.id}})})),e._v(" "),e.isyi?a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"选择员工"},model:{value:e.selectRep.destUserId,callback:function(t){e.$set(e.selectRep,"destUserId",t)},expression:"selectRep.destUserId"}},e._l(e.ClueData,function(e){return a("el-option",{key:e.id,attrs:{label:e.nickName,value:e.id}})})):e._e()],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isLookatThewHole=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.ThewHole}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"action_child"},[a("div",[a("div",{staticClass:"text-margin float-left"},[e.myDepId==e.depId()?[a("el-button",{attrs:{type:"primary",disabled:!e.selectRep.ids},on:{click:function(t){e.selectPubilk(!0,!1)}}},[e._v(e._s("queryCues"==e.radio?"分配选中":"移动选中"))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.selectPubilk(!0,!0)}}},[e._v(e._s("queryCues"==e.radio?"分配全部":"移动全部"))]),e._v(" "),"queryCues"==e.radio?a("el-button",{attrs:{type:"primary",disabled:""==e.selectRep.ids},on:{click:function(t){e.selectPubilk(!1,!1)}}},[e._v("移动选中")]):e._e(),e._v(" "),"queryCues"==e.radio?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.selectPubilk(!1,!0)}}},[e._v("移动全部")]):e._e()]:e._e(),e._v(" "),a("display-bars",{attrs:{msg:"queryCues"==e.radio?"条线索":"条潜客","count-sum":"queryCues"==e.radio?e.departmentalData.countSum:e.departmentalSubmersi.countSum}})],2),e._v(" "),"queryCues"==e.radio?a("div",{staticClass:"float-right"},[a("el-checkbox",{staticClass:"unallocated-cues",attrs:{border:""},model:{value:e.isSelectSearch,callback:function(t){e.isSelectSearch=t},expression:"isSelectSearch"}},[e._v("只查看未被加入服务的线索")])],1):e._e()]),e._v(" "),"queryCues"==e.radio?a("el-table",{key:"454717",attrs:{data:e.departmentalData.data},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"公司名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[e._v("公司名")]),e._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(t.row.companyName))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"color"},[e._v(e._s(t.row.companyName))])])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"官网",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("a",{staticClass:"color",attrs:{href:-1!=t.row.webSite.toString().indexOf("http")?t.row.webSite:"http://"+t.row.webSite,target:"_blank"}},[e._v("\n              "+e._s(t.row.webSite?t.row.webSite:"/")+"\n            ")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[e._v("地址")]),e._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(t.row.address))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(t.row.address))])])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"主营产品",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[e._v("主营产品")]),e._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(t.row.operation))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(t.row.operation))])])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"注册时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"部门",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.deptName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"跟进人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.userName?a("span",[e._v(e._s(t.row.userName))]):a("el-button",{attrs:{type:"text"},on:{click:function(a){e.joinService(t.row.id)}}},[e._v("加入服务")])]}}])})],1):a("el-table",{key:"454617",attrs:{data:e.departmentalSubmersi.data},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"公司名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[e._v("公司名")]),e._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(t.row.companyName))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"color"},[e._v(e._s(t.row.companyName))])])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"意向类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("span",[e._v(e._s(t.row.custType))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"跟进记录",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad font-popover"},[e._v("地址")]),e._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(t.row.record))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(t.row.record))])])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上次跟进时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("span",[e._v(e._s(t.row.lastDate))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"触达时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("span",[e._v(e._s(t.row.firstDate))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"跟进人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-table-height"},[a("span",[e._v(e._s(t.row.userName))])])]}}])})],1),e._v(" "),a("page-component",{attrs:{radio:e.radio,data:e.pageData},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(n,c,!1,function(e){a("8HNP")},"data-v-55ac0f8a",null);t.default=d.exports},mvHQ:function(e,t,a){e.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(e,t,a){var s=a("FeBl"),i=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}}});