webpackJsonp([13],{RFEJ:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={name:"Intelligent",components:{Action_tit:e("mMS5").a},data:function(){return{name:"",hostChild:"",isSu:!1,isSucc:!1,loading:!1,btnText:"开始匹配",loadText:"",setInt:"",init:"",isUpdata:!1,resData:{effectiveNumber:"",filePath:"",seedNumber:"",quality:""}}},computed:{token:function(){var t={};return t[this.codeKey]=window.localStorage[this.codeKey],t}},methods:{onSuccess:function(t){var a=this;200==t.status?(a.isUpdata=!0,a.isSu=!1,a.resData={effectiveNumber:"",filePath:"",seedNumber:"",quality:""},a.$message({type:"success",message:"上传成功，正在检测"}),a.btnText="正在检测中，请稍后",a.loading=!0,a.loadText="正在检测中",a.axios({method:"post",url:a.host+"clue/match",data:{filePath:t.data,userId:window.localStorage.id}}).then(function(t){200==t.data.status&&(0!=t.data.data.quality?(a.isSucc=!0,a.btnText="开始匹配",a.loading=!1):(a.isSucc=!1,a.btnText="种子质量差",a.loading=!1),a.resData.effectiveNumber=t.data.data.effectiveNumber,a.resData.quality=t.data.data.quality,a.resData.seedNumber=t.data.data.seedNumber,a.resData.filePath=t.data.data.filePath,a.$message({type:"success",message:"检测成功"}))})):(a.isSucc=!1,a.$message.error("上传失败，请上传正确的样本"))},touplode:function(){this.$refs.upload.submit()},uplode:function(){var t=this;this.loading=!0,this.btnText="上传中，请稍后",t.loadText="上传中",t.axios({method:"post",url:t.host+"clue/startMatch",data:{fileName:t.resData.filePath,userId:window.localStorage.id}}).then(function(a){t.$router.push({name:"Matching",params:{value:"0"}})})}},created:function(){this.hostChild=this.host}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"action_child"},[e("action_tit",{attrs:{title:"智能匹配"}}),t._v(" "),e("el-row",{staticClass:"tit"},[e("el-col",{attrs:{span:16}},[e("div",{staticClass:"w"},[t._v("上传种子企业")])])],1),t._v(" "),e("el-row",{staticClass:"upload"},[e("el-col",{attrs:{span:16}},[e("el-row",{staticClass:"border"},[e("el-col",{attrs:{span:12}},[e("a",{staticClass:"dowlode",attrs:{href:"http://jzyx.bybigdata.com/excel/example/example.xlsx"}},[e("img",{staticClass:"img",attrs:{src:"https://shop.bybigdata.com/image/updata.png"}}),t._v(" "),e("div",{staticClass:"el-upload__text center",staticStyle:{color:"#616161","text-decoration":"none"}},[t._v("点击按钮下载样本")])]),t._v(" "),e("div",{staticClass:"center"},[e("a",{staticClass:"a",attrs:{href:"http://jzyx.bybigdata.com/excel/example/example.xlsx"}},[t._v("下载样本")])])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{limit:1,drag:"",action:t.hostChild+"clue/upload","auto-upload":!1,headers:t.token,"on-success":t.onSuccess,multiple:""}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),e("em",[t._v("点击上传")])]),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("只能上传xlsx文件")])]),t._v(" "),e("div",{staticClass:"center"},[e("el-button",{attrs:{type:"primary"},on:{click:t.touplode}},[t._v("上传样本")])],1)],1)],1)],1),t._v(" "),e("el-collapse-transition",[t.isUpdata?e("el-col",{attrs:{span:8}},[e("div",{staticClass:"center mar"},[e("span",[t._v("当前种子数量 ")]),t._v(" "),e("span",{staticClass:"red"},[t._v(t._s(t.resData.seedNumber))]),t._v(" "),e("span",[t._v("，有效数量 ")]),t._v(" "),e("span",{staticClass:"red"},[t._v(t._s(t.resData.effectiveNumber))]),t._v(" "),e("span",[t._v("，种子质量 ")]),t._v(" "),e("span",{staticClass:"red"},[t._v(t._s(0===t.resData.quality?"差":1===t.resData.quality?"良":2===t.resData.quality?"优":""))])]),t._v(" "),e("div",{staticClass:"center"},[e("el-button",{staticClass:"btn",attrs:{disabled:!t.isSucc,type:t.isSucc?"primary":t.isSu?"success":"info",loading:t.loading},on:{click:t.uplode}},[t._v(t._s(t.btnText))])],1),t._v(" "),t.loading?e("div",{staticClass:"center",staticStyle:{"margin-top":"20px",color:"#585858"}},[t._v(t._s(t.loadText)),e("span",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticStyle:{color:"#E6A23C"}},[t._v("   请勿刷新当前页面哦！")])]):t._e()]):t._e()],1)],1)],1)},staticRenderFns:[]};var l=e("VU/8")(s,i,!1,function(t){e("nKMV")},"data-v-5bb79034",null);a.default=l.exports},nKMV:function(t,a){}});