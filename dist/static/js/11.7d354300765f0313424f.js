webpackJsonp([11],{dQaF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),l=a.n(s),r={name:"mdetails",components:{Action_tit:a("mMS5").a},data:function(){return{toSelectNumberInterval:null,toSelectNumber:0,isSelectAll:!1,lodText:"滑动滚轮查看更多",islod:!1,checked:!1,fileName:"",selectAll:"",dialogSelect:!1,selectDate:{},repData:{rows:20,pageNumber:1,userId:"",mId:"",resultNumber:""},resData:{status:"-1",countSum:0,data:[]},seeEnterprise:{lists:[],userId:"",type:0,isTrue:0},exportlist:{lists:[],userId:1,isTrue:0,type:3}}},methods:{getSelect:function(){var t=this;if(t.settoSelectNumberInterval(),t.dialogSelect=!1,1==t.command)t.seeEnterprise.isTrue=1,t.selectAll="查看选中",t.axios({method:"post",url:t.host+"clue/showMatchPhone",data:t.seeEnterprise}).then(function(e){200==e.data.status?(t.isRespons(e.data.status,!1,e.data.data),t.$message({type:"success",message:e.data.msg})):t.$message.error(e.data.msg)}).catch(function(e){t.selectAll="",t.isSelectAll=!1,t.$message.error("请求错误")});else if(2==t.command)t.exportlist.isTrue=1,t.selectAll="导出选中",t.axios({method:"post",url:t.host+"clue/exportSmartMatch",data:t.exportlist}).then(function(e){200==e.data.status?(t.isRespons(e.data.status,!1,e.data.data),t.urlDownload(e.data.data.FileUrl),t.$message({type:"success",message:e.data.msg})):t.$message.error(e.data.msg)}).catch(function(e){t.selectAll="",t.isSelectAll=!1,t.$message.error("请求错误")});else if(4==t.command){t.selectAll="导出全部";var e=t.getUpdataId(t.resData.data,"ids");t.axios({method:"post",url:t.host+"clue/exportAllSmartMatch",data:{type:"3",ids:e,userId:window.localStorage.id,mId:t.repData.mId,isTrue:1}}).then(function(e){200==e.data.status?(t.isRespons(e.data.status,!1,e.data.data),t.$message({type:"success",message:e.data.msg})):t.$message.error(e.data.msg)}).catch(function(e){t.selectAll="",t.isSelectAll=!1,t.$message.error("请求错误")})}else if(3==t.command){e=t.getUpdataId(t.resData.data,"ids");t.selectAll="查看全部",t.axios({method:"post",url:t.host+"clue/showMatchAllPhone",data:{mId:t.repData.mId,isTrue:1,ids:e,type:0,userId:window.localStorage.id}}).then(function(e){200==e.data.status?(t.isRespons(e.data.status,!1,e.data.data),t.$message({type:"success",message:e.data.msg})):t.$message.error(e.data.msg)}).catch(function(e){t.selectAll="",t.isSelectAll=!1,t.$message.error("请求错误")})}},isRespons:function(t,e,a){var s=this;if(clearInterval(s.toSelectNumberInterval),200==t){var r=0;s.toSelectNumberInterval=setInterval(function(){if(0==r){var t=(100-s.toSelectNumber)/2,o=s.toSelectNumber+t;s.toSelectNumber=parseFloat(parseFloat(o).toFixed(2)),r++}else if(1==r)s.toSelectNumber=100,r++;else{if(e)s.dialogSelect=!0;else{t=0;for(var n in a){var c=!0,i=!1,d=void 0;try{for(var u,m=l()(s.resData.data);!(c=(u=m.next()).done);c=!0){var p=u.value;if(p.id==n){t++,p.contactPhone=a[n];break}}}catch(t){i=!0,d=t}finally{try{!c&&m.return&&m.return()}finally{if(i)throw d}}}}s.selectAll="",s.toSelectNumber=0,clearInterval(s.toSelectNumberInterval)}},300)}else 405!=t||e?(s.selectAll="",s.toSelectNumber=0,s.$message.error("请求错误")):(s.selectAll="",s.toSelectNumber=0,s.$confirm("积分不足，请联系客服充值","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){}))},settoSelectNumberInterval:function(){var t=this;t.toSelectNumber=0;var e=0;t.toSelectNumberInterval=setInterval(function(){var a=0;t.toSelectNumber<=60?a=Math.random()/2:t.toSelectNumber>60&&t.toSelectNumber<=90?(a=Math.random(),a/=10):t.toSelectNumber>90&&t.toSelectNumber<95?++e>20&&(a=Math.random(),a/=8):t.toSelectNumber>95&&t.toSelectNumber<98.5&&(a=Math.random(),a/=20);var s=t.toSelectNumber;s+=a,(s=parseFloat(s.toFixed(2)))>=100&&(s=100),t.toSelectNumber=s},500)},handleCommand:function(t){var e=this;if(e.command=t,e.settoSelectNumberInterval(),1==t){if(e.seeEnterprise.lists=e.getUpdataId(e.resData.data,"lists"),0==this.seeEnterprise.lists.length)return void e.$message({type:"warning",message:"请选择需查看企业"});e.seeEnterprise.isTrue=0,e.selectAll="查看选中",e.axios({method:"post",url:e.host+"clue/showMatchPhone",data:e.seeEnterprise}).then(function(t){e.isRespons(t.data.status,!0),e.selectDate=t.data.data.Consumption}).catch(function(t){e.selectAll="",e.isSelectAll=!1,e.$message.error("请求错误")})}else if(2==t){if(e.exportlist.lists=e.getUpdataId(e.resData.data,"lists"),e.exportlist.isTrue=0,0==e.exportlist.lists.length)return void e.$message({type:"warning",message:"请选择需导出的企业"});e.selectAll="导出选中",e.axios({method:"post",url:e.host+"clue/exportSmartMatch",data:e.exportlist}).then(function(t){e.isRespons(t.data.status,!0),200==t.data.status&&(e.selectDate=t.data.data.Consumption)}).catch(function(t){e.selectAll="",e.isSelectAll=!1,e.$message.error("请求错误")})}else if(4==t){var a=e.getUpdataId(e.resData.data,"ids");e.selectAll="导出全部",e.axios({method:"post",url:e.host+"clue/exportAllSmartMatch",data:{type:"3",ids:a,userId:window.localStorage.id,mId:e.repData.mId,isTrue:0}}).then(function(t){e.isRespons(t.data.status,!0),200==t.data.status&&(e.selectDate=t.data.data.Consumption)}).catch(function(t){e.selectAll="",e.isSelectAll=!1,e.$message.error("请求错误")})}else if(3==t){a=e.getUpdataId(e.resData.data,"ids");e.selectAll="查看全部",e.axios({method:"post",url:e.host+"clue/showMatchAllPhone",data:{mId:e.repData.mId,isTrue:0,ids:a,type:0,userId:window.localStorage.id}}).then(function(t){e.isRespons(t.data.status,!0),200==t.data.status&&(e.selectDate=t.data.data.Consumption)}).catch(function(t){e.selectAll="",e.isSelectAll=!1,e.$message.error("请求错误")})}},exportHandleCommand:function(){},reChange:function(t){},pubilkChange:function(t){var e=!0,a=!1,s=void 0;try{for(var r,o=l()(this.resData.data);!(e=(r=o.next()).done);e=!0){r.value.is=t}}catch(t){a=!0,s=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw s}}}},created:function(){var t=this,e=this.$route.params.value.split("&"),a=t.repData;a.userId=window.localStorage.id,a.mId=e[0],a.fileName=e[1],a.resultNumber=e[2],t.seeEnterprise.userId=window.localStorage.id;var s="clue/querySmartResult?pageNumber="+a.pageNumber+"&rows="+a.rows+"&mId="+a.mId+"&userId="+a.userId;t.axios({method:"get",url:t.host+s}).then(function(e){200==e.data.status&&(t.resData.data=e.data.data,t.resData.countSum=e.data.countSum,t.resData.countSum<20&&(t.lodText="暂无更多"))}),window.onmousewheel=function(){if(-1!=t.$route.path.indexOf("mdetails")&&Number(window.getComputedStyle(document.documentElement).height.replace("px",""))==document.documentElement.scrollTop+document.documentElement.clientHeight){var e=Number(t.repData.pageNumber);Math.ceil(t.resData.countSum/20>e&&0==t.islod)&&(t.islod=!0,e++,a.pageNumber=e,t.axios({method:"get",url:t.host+"clue/querySmartResult?pageNumber="+a.pageNumber+"&rows="+a.rows+"&mId="+a.mId+"&userId="+a.userId}).then(function(e){if(200==e.data.status){t.islod=!1;var a=e.data.data;t.resData.data=t.resData.data.concat(a),t.resData.data.length>=t.resData.countSum&&(t.lodText="暂无更多")}}))}}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action_child"},[a("action_tit",{attrs:{title:"匹配详情"}}),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogSelect,width:"35%"},on:{"update:visible":function(e){t.dialogSelect=e}}},[a("span",[t._v(t._s(t.selectDate))]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogSelect=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.getSelect}},[t._v("确 定")])],1)]),t._v(" "),a("el-row",{staticClass:"exprot",attrs:{gutter:15}},[a("el-col",{attrs:{span:16}},[a("span",[t._v("百邑为您匹配出 ")]),a("span",{staticClass:"red"},[t._v(t._s(t.resData.countSum))]),a("span",[t._v(" 条线索")])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"btn",attrs:{disabled:""!=t.selectAll,loading:"查看选中"==t.selectAll,type:"primary"},on:{click:function(e){t.handleCommand(1)}}},[t._v("\n        查看选中\n      ")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"btn",attrs:{disabled:""!=t.selectAll,loading:"导出选中"==t.selectAll,plain:"",type:"primary"},on:{click:function(e){t.handleCommand(2)}}},[t._v("\n        导出选中\n      ")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"btn",attrs:{disabled:""!=t.selectAll,loading:"查看全部"==t.selectAll,type:"primary"},on:{click:function(e){t.handleCommand(3)}}},[t._v("\n        查看全部\n      ")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"btn",attrs:{disabled:""!=t.selectAll,loading:"导出全部"==t.selectAll,plain:"",type:"primary"},on:{click:function(e){t.handleCommand(4)}}},[t._v("\n        导出全部\n      ")])],1)],1),t._v(" "),a("el-row",{staticClass:"tit-row"},[a("el-col",{staticClass:"center",attrs:{span:1}},[a("el-checkbox",{on:{change:t.pubilkChange},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1),t._v(" "),a("el-col",{staticClass:"left",attrs:{span:5}},[t._v("企业名称")]),t._v(" "),a("el-col",{staticClass:"center",attrs:{span:4}},[t._v("官网")]),t._v(" "),a("el-col",{staticClass:"center",attrs:{span:5}},[t._v("地址")]),t._v(" "),a("el-col",{staticClass:"center",attrs:{span:6}},[t._v("主营产品")]),t._v(" "),a("el-col",{staticClass:"right pad",attrs:{span:3}},[t._v("匹配率")])],1),t._v(" "),t.selectAll?a("div",{staticStyle:{height:"80px",width:"100%","text-align":"center","padding-top":"20px"}},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":12,percentage:t.toSelectNumber}}),t._v(" "),a("div",{staticClass:"center",staticStyle:{"margin-top":"5px"}},[a("span",{class:t.toSelectNumber<100?"el-icon-loading":"el-icon-success",style:t.toSelectNumber<100?"":"color:#67C23A;"}),a("span",{staticStyle:{color:"#8a8a8a"}},[t._v(t._s(100==t.toSelectNumber?"  加载成功":"  加载中 请稍后"))])])],1):t._e(),t._v(" "),t._l(t.resData.data,function(e){return a("el-row",{staticClass:"act-row"},[a("el-col",{staticClass:"center",attrs:{span:1}},[a("el-checkbox",{on:{change:t.reChange},model:{value:e.is,callback:function(a){t.$set(e,"is",a)},expression:"v.is"}})],1),t._v(" "),a("el-col",{staticClass:"left color",staticStyle:{cursor:"pointer"},attrs:{span:5}},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad",staticStyle:{"font-weight":"600","margin-bottom":"6px"}},[t._v("公司名称")]),t._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[t._v(t._s(e.companyName))]),t._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[t._v(t._s(e.companyName))])])])],1),t._v(" "),a("el-col",{staticClass:"center pad",attrs:{span:4}},[a("a",{staticClass:"color",attrs:{href:"http://"+e.network,target:"_blank"}},[t._v(t._s(e.website?e.website:"/"))])]),t._v(" "),a("el-col",{staticClass:"center pad",staticStyle:{cursor:"pointer"},attrs:{span:5}},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad",staticStyle:{"font-weight":"600","margin-bottom":"6px"}},[t._v("地址")]),t._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[t._v(t._s(e.address))]),t._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[t._v(t._s(e.address?e.address:" "))])])])],1),t._v(" "),a("el-col",{staticClass:"center pad",staticStyle:{cursor:"pointer"},attrs:{span:6}},[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("div",{staticClass:"center pad",staticStyle:{"font-weight":"600","margin-bottom":"6px"}},[t._v("主营产品")]),t._v(" "),a("div",{staticClass:"center pad",staticStyle:{"margin-bottom":"6px"}},[t._v(t._s(e.products))]),t._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[t._v(t._s(e.products?e.products:" "))])])])],1),t._v(" "),a("el-col",{staticClass:"right pad",attrs:{span:3}},[t._v(t._s(e.suitability?e.suitability:"/"))])],1)}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.resData.countSum,expression:"resData.countSum"}],staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{staticStyle:{background:"#fff",border:"none",color:"#7a7a7a"},attrs:{loading:t.islod}},[t._v(t._s(t.islod?"努力加载中":t.lodText))])],1)],2)},staticRenderFns:[]};var n=a("VU/8")(r,o,!1,function(t){a("qp+1")},"data-v-5fbf2362",null);e.default=n.exports},"qp+1":function(t,e){}});